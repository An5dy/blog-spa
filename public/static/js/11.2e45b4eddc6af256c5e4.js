webpackJsonp([11],{AMdi:function(t,e,n){var o=n("B9J/");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("3c68b886",o,!0)},"B9J/":function(t,e,n){e=t.exports=n("FZ+f")(!0),e.push([t.i,"\n.login-submit {\n  height: 40px;\n  font-size: 15px;\n  margin-top: 10px;\n}\n","",{version:3,sources:["/Users/zhangze/www/blog/www/src/components/Sign/Login/Login.vue"],names:[],mappings:";AACA;EACE,aAAa;EACb,gBAAgB;EAChB,iBAAiB;CAClB",file:"Login.vue",sourcesContent:["\n.login-submit {\n  height: 40px;\n  font-size: 15px;\n  margin-top: 10px;\n}\n"],sourceRoot:""}])},C9O2:function(t,e,n){"use strict";(function(t){var e=n("pFYg"),o=n.n(e);!function(e,n){"object"===o()(t)&&"object"===o()(t.exports)?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("Geetest requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(t,e){function n(t){this._obj=t}function a(t){var e=this;new n(t)._each(function(t,n){e[t]=n})}if(void 0===t)throw new Error("Geetest requires browser environment");var r=t.document,i=t.Math,s=r.getElementsByTagName("head")[0];n.prototype={_each:function(t){var e=this._obj;for(var n in e)e.hasOwnProperty(n)&&t(n,e[n]);return this}},a.prototype={api_server:"api.geetest.com",protocol:"http://",type_path:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){var t=this;return u(t.type)?t.fallback_config[t.type]:t.new_captcha?t.fallback_config.fullpage:t.fallback_config.slide},_extend:function(t){var e=this;new n(t)._each(function(t,n){e[t]=n})}};var c=function(t){return"number"==typeof t},u=function(t){return"string"==typeof t},l=function(t){return"boolean"==typeof t},f=function(t){return"object"===(void 0===t?"undefined":o()(t))&&null!==t},p=function(t){return"function"==typeof t},d={},g={},m=function(){return parseInt(1e4*i.random())+(new Date).valueOf()},h=function(t,e){var n=r.createElement("script");n.charset="UTF-8",n.async=!0,n.onerror=function(){e(!0)};var o=!1;n.onload=n.onreadystatechange=function(){o||n.readyState&&"loaded"!==n.readyState&&"complete"!==n.readyState||(o=!0,setTimeout(function(){e(!1)},0))},n.src=t,s.appendChild(n)},v=function(t){return t.replace(/^https?:\/\/|\/$/g,"")},_=function(t){return t=t.replace(/\/+/g,"/"),0!==t.indexOf("/")&&(t="/"+t),t},w=function(t){if(!t)return"";var e="?";return new n(t)._each(function(t,n){(u(n)||c(n)||l(n))&&(e=e+encodeURIComponent(t)+"="+encodeURIComponent(n)+"&")}),"?"===e&&(e=""),e.replace(/&$/,"")},b=function(t,e,n,o){e=v(e);var a=_(n)+w(o);return e&&(a=t+e+a),a},y=function(t,e,n,o,a){!function r(i){var s=b(t,e[i],n,o);h(s,function(t){t?i>=e.length-1?a(!0):r(i+1):a(!1)})}(0)},C=function(e,n,o,a){if(f(o.getLib))return o._extend(o.getLib),void a(o);if(o.offline)return void a(o._get_fallback_config());var r="geetest_"+m();t[r]=function(e){a("success"===e.status?e.data:e.status?o._get_fallback_config():e),t[r]=void 0;try{delete t[r]}catch(t){}},y(o.protocol,e,n,{gt:o.gt,callback:r},function(t){t&&a(o._get_fallback_config())})},x=function(t,e){var n={networkError:"网络错误"};if("function"!=typeof e.onError)throw new Error(n[t]);e.onError(n[t])};(function(){return!!t.Geetest})()&&(g.slide="loaded");var E=function(e,n){var o=new a(e);e.https?o.protocol="https://":e.protocol||(o.protocol=t.location.protocol+"//"),C([o.api_server||o.apiserver],o.type_path,o,function(e){var a=e.type,r=function(){o._extend(e),n(new t.Geetest(o))};d[a]=d[a]||[];var i=g[a]||"init";"init"===i?(g[a]="loading",d[a].push(r),y(o.protocol,e.static_servers||e.domains,e[a]||e.path,null,function(t){if(t)g[a]="fail",x("networkError",o);else{g[a]="loaded";for(var e=d[a],n=0,r=e.length;n<r;n+=1){var i=e[n];p(i)&&i()}d[a]=[]}})):"loaded"===i?r():"fail"===i?x("networkError",o):"loading"===i&&d[a].push(r)})};return t.initGeetest=E,E})}).call(e,n("f1Eh")(t))},f1Eh:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},miib:function(t,e,n){"use strict";function o(t){n("AMdi")}Object.defineProperty(e,"__esModule",{value:!0});var a=(n("C9O2"),{data:function(){return{formCustom:{email:"",password:""},ruleCustom:{email:[{validator:function(t,e,n){if(""===e)n(new Error("邮箱不能为空"));else{/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(e)?n():n(new Error("邮箱格式不正确"))}},trigger:"blur"}],password:[{validator:function(t,e,n){""===e?n(new Error("密码不能为空")):n()},trigger:"blur"}]},captcha:{}}},methods:{getCaptchas:function(){var t=this;this.axios.get("/captcha/get").then(function(e){initGeetest({gt:e.data.data.captcha.gt,challenge:e.data.data.captcha.challenge,offline:!e.data.data.captcha.success,new_captcha:e.data.data.captcha.new_captcha,product:"popup",width:"100%"},function(e){t.captcha=e,e.appendTo("#captcha"),e.onReady(function(){document.getElementById("loadingCaptcha").style.display="none"})})})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){e.$Loading.start();var n=e.captcha.getValidate();if(n){var o={geetest_challenge:n.geetest_challenge,geetest_validate:n.geetest_validate,geetest_seccode:n.geetest_seccode,email:e.formCustom.email,password:e.formCustom.password};e.axios.post("/login",o).then(function(t){"10000"===t.data.code?(e.$store.dispatch("storeUserInfo",t.data.data),e.$Message.success(t.data.message),e.$router.push("/")):e.$Message.error(t.data.message)})}else e.$Message.error("验证码错误");e.captcha.reset()}else e.$Message.error("登录失败");e.$Loading.finish()})}},mounted:function(){this.getCaptchas()}}),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Row",[n("Form",{ref:"formCustom",attrs:{model:t.formCustom,rules:t.ruleCustom,"label-position":"top"}},[n("FormItem",{attrs:{label:"邮箱:",prop:"email"}},[n("Input",{model:{value:t.formCustom.email,callback:function(e){t.$set(t.formCustom,"email",e)},expression:"formCustom.email"}})],1),t._v(" "),n("FormItem",{attrs:{label:"密码:",prop:"password"}},[n("Input",{attrs:{type:"password"},model:{value:t.formCustom.password,callback:function(e){t.$set(t.formCustom,"password",e)},expression:"formCustom.password"}})],1),t._v(" "),n("FormItem",{attrs:{label:"验证码:"}},[n("div",{attrs:{id:"captcha"}},[n("span",{attrs:{id:"loadingCaptcha"}},[t._v("验证码加载中...")])])]),t._v(" "),n("FormItem",[n("Button",{staticClass:"login-submit",attrs:{type:"success",long:""},on:{click:function(e){t.handleSubmit("formCustom")}}},[t._v("登录")])],1)],1)],1)},i=[],s={render:r,staticRenderFns:i},c=s,u=n("VU/8"),l=o,f=u(a,c,!1,l,null,null);e.default=f.exports}});