webpackJsonp([4],{B52v:function(t,n,e){"use strict";function i(t){e("DSns")}Object.defineProperty(n,"__esModule",{value:!0});var a=e("qkuF"),s={_getScrollTop:function(){var t=void 0;return self.pageYOffset?t=self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?t=document.documentElement.scrollTop:document.body&&(t=document.body.scrollTop),t},_getScrollHeight:function(){return document.body.scrollHeight},_getInnerHeight:function(){return window.innerHeight},isEnd:function(){return this._getScrollHeight()<=this._getInnerHeight()+this._getScrollTop()}},o={name:"Home",components:{MenuList:a.d,ArticleItem:a.a,Sidebar:a.e},data:function(){return{articles:[],hasMore:!1,spinShow:!1,nextPage:1,currentPage:1,lastPage:1}},methods:{getArticles:function(){var t=this;this.$Loading.start();var n={page:this.nextPage};"/search"===this.$route.path&&null!=this.$route.query.title?n.title=this.$route.query.title:this.$route.path.includes("/category")?n.category_id=this.$route.params.id:this.$route.path.includes("/author")?n.user_id=this.$route.params.id:this.$route.path.includes("/new")&&(n.order_by="time"),this.axios.get("/articles",{params:n}).then(function(n){"10000"==n.data.code&&(t.currentPage=n.data.meta.current_page,t.lastPage=n.data.meta.last_page,t.currentPage<t.lastPage?(t.spinShow=!0,t.hasMore=!0):(t.hasMore=!1,t.spinShow=!1),t.articles=t.articles.concat(n.data.data))}),this.$Loading.finish()},initScroll:function(){var t=this;document.addEventListener("scroll",function(n){s._getScrollTop()>0&&s.isEnd()&&t.hasMore&&t.lastPage>t.nextPage&&(t.nextPage++,t.getArticles())})}},watch:{$route:function(t,n){this.articles=[],this.currentPage=1,this.nextPage=1,this.lastPage=1,this.hasMore=!1,this.getArticles()}},mounted:function(){this.getArticles(),this.initScroll()},destroy:function(){window.removeEventListener("scroll",this.initScroll)}},r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("Row",{staticClass:"content"},[e("i-col",{staticClass:"article-list",attrs:{span:"16"}},[e("transition-group",{attrs:{name:"list",tag:"div"}},t._l(t.articles,function(t,n){return e("article-item",{key:t.id,attrs:{article:t}})})),t._v(" "),e("div",{staticClass:"demo-spin-container"},[t.spinShow?e("Spin",{attrs:{fix:""}},[e("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"load-c",size:"18"}}),t._v(" "),e("div",[t._v("加载中...")])],1):t._e(),t._v(" "),t.hasMore?t._e():e("div",[t._v("已加载全部...")])],1)],1),t._v(" "),e("i-col",{staticClass:"sidebar-right",attrs:{span:"8"}},[e("sidebar")],1),t._v(" "),e("menu-list")],1)},l=[],c={render:r,staticRenderFns:l},d=c,A=e("VU/8"),p=i,m=A(o,d,!1,p,"data-v-80fe08c6",null);n.default=m.exports},DSns:function(t,n,e){var i=e("pJqS");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e("rjj0")("cf9763ae",i,!0)},pJqS:function(t,n,e){n=t.exports=e("FZ+f")(!0),n.push([t.i,"\n.content[data-v-80fe08c6] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n@media (max-width: 768px) {\n.content .sidebar-right[data-v-80fe08c6] {\n    display: none;\n}\n}\n.content .article[data-v-80fe08c6] {\n  padding-left: 5px;\n  padding-right: 5px;\n}\n.content .article-list[data-v-80fe08c6] {\n  padding: 0px 5px;\n}\n.content .article-list .list-enter-active[data-v-80fe08c6] {\n  -webkit-transition: all 1.5s;\n  transition: all 1.5s;\n}\n.content .article-list .list-enter[data-v-80fe08c6] {\n  opacity: 0;\n  -webkit-transform: translateY(30px);\n          transform: translateY(30px);\n}\n@media (max-width: 768px) {\n.content .article-list[data-v-80fe08c6] {\n    width: 100%;\n}\n}\n.demo-spin-container[data-v-80fe08c6] {\n  display: inline-block;\n  width: 100%;\n  height: 50px;\n  position: relative;\n  text-align: center;\n}\n.demo-spin-icon-load[data-v-80fe08c6] {\n  -webkit-animation: ani-demo-spin 1s linear infinite;\n          animation: ani-demo-spin 1s linear infinite;\n}\n.ivu-spin-fix[data-v-80fe08c6] {\n  background: none;\n}\nlist-item[data-v-80fe08c6] {\n  display: inline-block;\n  margin-right: 10px;\n}\nlist-item[data-v-80fe08c6] {\n  display: inline-block;\n  margin-right: 10px;\n}\n","",{version:3,sources:["/Users/zhangze/www/blog/www/src/components/Modules/Views/Home/Home.vue"],names:[],mappings:";AACA;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;CACf;AACD;AACA;IACI,cAAc;CACjB;CACA;AACD;EACE,kBAAkB;EAClB,mBAAmB;CACpB;AACD;EACE,iBAAiB;CAClB;AACD;EACE,6BAA6B;EAC7B,qBAAqB;CACtB;AACD;EACE,WAAW;EACX,oCAAoC;UAC5B,4BAA4B;CACrC;AACD;AACA;IACI,YAAY;CACf;CACA;AACD;EACE,sBAAsB;EACtB,YAAY;EACZ,aAAa;EACb,mBAAmB;EACnB,mBAAmB;CACpB;AACD;EACE,oDAAoD;UAC5C,4CAA4C;CACrD;AACD;EACE,iBAAiB;CAClB;AACD;EACE,sBAAsB;EACtB,mBAAmB;CACpB;AACD;EACE,sBAAsB;EACtB,mBAAmB;CACpB",file:"Home.vue",sourcesContent:["\n.content[data-v-80fe08c6] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n@media (max-width: 768px) {\n.content .sidebar-right[data-v-80fe08c6] {\n    display: none;\n}\n}\n.content .article[data-v-80fe08c6] {\n  padding-left: 5px;\n  padding-right: 5px;\n}\n.content .article-list[data-v-80fe08c6] {\n  padding: 0px 5px;\n}\n.content .article-list .list-enter-active[data-v-80fe08c6] {\n  -webkit-transition: all 1.5s;\n  transition: all 1.5s;\n}\n.content .article-list .list-enter[data-v-80fe08c6] {\n  opacity: 0;\n  -webkit-transform: translateY(30px);\n          transform: translateY(30px);\n}\n@media (max-width: 768px) {\n.content .article-list[data-v-80fe08c6] {\n    width: 100%;\n}\n}\n.demo-spin-container[data-v-80fe08c6] {\n  display: inline-block;\n  width: 100%;\n  height: 50px;\n  position: relative;\n  text-align: center;\n}\n.demo-spin-icon-load[data-v-80fe08c6] {\n  -webkit-animation: ani-demo-spin 1s linear infinite;\n          animation: ani-demo-spin 1s linear infinite;\n}\n.ivu-spin-fix[data-v-80fe08c6] {\n  background: none;\n}\nlist-item[data-v-80fe08c6] {\n  display: inline-block;\n  margin-right: 10px;\n}\nlist-item[data-v-80fe08c6] {\n  display: inline-block;\n  margin-right: 10px;\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=4.9daef1f10d9e16c08ed9.js.map